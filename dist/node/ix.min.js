 /*! ix 2016-03-07 06:09:35 */
function chownFileOwner(a){global.processOwner&&childProcess.exec("chown -R "+global.processOwner+" "+a)}function _safeMkdirSync(a){var b=a.split("/"),c="";b.shift();try{b.forEach(function(a){c=c+"/"+a,fs.existsSync(c)||fs.mkdirSync(c,493)})}catch(d){console.error("Exception as mkdir :"+c+"::"+d)}}function saveFileIfNotExist(a,b,c,d){var e=a+"/"+b;return fs.existsSync(e)?d(new Error("File existed: "+e),e):(fs.existsSync(a)||(_safeMkdirSync(a),chownFileOwner(a)),debugIsAllow("file")&&IX.log("SAVE "+e+":"+c.length),void fs.writeFile(e,c,{mode:493},function(a){chownFileOwner(e),d(a,e)}))}function safeChkFileSync(a,b,c){var d=a+"/"+b,e=d+"/"+c;return debugIsAllow("file")&&IX.log("safeChkFileSync  "+e),fs.existsSync(e)?null:(fs.existsSync(a)||(IX.safeMkdirSync(a),chownFileOwner(a)),fs.existsSync(d)||(fs.mkdirSync(d,493),chownFileOwner(d)),e)}function safeRenameAsSync(a,b,c,d){var e=safeChkFileSync(b,c,d);return debugIsAllow("file")&&IX.log("try RENAME  "+e+" from "+a),e?(fs.renameSync(a,e),void chownFileOwner(e)):fs.unlinkSync(a)}function safeCopyToSync(a,b,c,d){var e=safeChkFileSync(b,c,d);debugIsAllow("file")&&IX.log("try COPY  "+e+" from "+a),e&&(fs.createReadStream(a).pipe(fs.createWriteStream(e)),chownFileOwner(e))}function safeWriteFileSync(a,b){var c=path.dirname(a);_safeMkdirSync(c),fs.writeFileSync(a,b),chownFileOwner(a)}function iterDirSync(a,b,c){var d=a+b,e=fs.statSync(d);e.isDirectory()?(fs.readdirSync(d)||[]).forEach(function(d){iterDirSync(a,b+"/"+d,c)}):e.isFile()&&c(b,d)}function createDigest(){var a=crypto.createHash("sha1");return{update:function(b){a.update(b)},end:function(){return a.digest("hex")}}}function digestOnce(a){var b=createDigest();return b.update(a),b.end()}function setLogPath(a,b){if(!IX.isEmpty(a)||!IX.isEmpty(b)){fs.existsSync(a)||_safeMkdirSync(a),logFile=a+"/"+b;try{fs.appendFileSync(logFile+".log","\n"),console.log("success set log path : "+logFile)}catch(c){console.error("Exception as set log dir: "+logFile+"\n"+c)}}}function _log(a,b){var c=IX.getTimeStrInMS(),d="["+c+"]:"+b;if("Test"in global&&"file"!=global.Test.debug)return console.log(d);var e=logFile+"."+a.toLowerCase();fs.appendFileSync(e,d+"\n");try{var f=fs.statSync(e);f&&f.size>1e7&&fs.renameSync(e,e+"."+c)}catch(g){console.error("Exception as rename to log file "+e+"."+c+" : \n"+g)}}!function(){function a(a){return void 0===a||null===a||""===a}function b(a){return"undefined"==typeof a}function c(a){return"string"==typeof a&&""!==a}function d(a,b){return a==i&&b==j}function e(a,b){for(var c=[],d=a.match(b),e=d?d.length:0,f=0;e>f;f++){var g=d[f],h=a.indexOf(g);-1!==h&&(c.push(a.substring(0,h)),a=a.substring(h+g.length))}return c.push(a),{separate:c,arr:d}}function f(a,b){var c=[],d=/[^\u0020-\u007A]/g,e=a.length,f=(a.match(/[\u0020-\u007A]/g)||[]).length,g=a.substring(0,b);if((g.match(d)||[]).length>0)for(var h=0,i=0;b>i;i++){var j=a[i];if(void 0===j||h>=b){b-1>i&&e>i&&c.push("...");break}h+=j.match(d)?2:1,c.push(j)}else c.push(g);return{reString:c.join(""),reLength:e>b?b:e,stringLength:2*(e-f)+f}}var g=!1;try{g=window&&"navigator"in window}catch(h){}var i=g?window:global;IX_GLOBAL=i,IX_GLOBAL.IX_DOM_MODE=g,IX_GLOBAL.IX_VERSION="1.0",IX_GLOBAL.IX_DEBUG_MODE=!1,IX_GLOBAL.IX_SCRIPT_NAME="ix.js";var j=g?"window":"global",k=[];IX_GLOBAL.IXDebug={isAllow:function(a){if(!IX_DEBUG_MODE)return!1;for(var b=k.length,c=0;b>c;c++)if("all"===k[c]||new RegExp(k[c],"i").test(a))return!0;return!1},clear:function(){k=[]},reset:function(a){k=a}},IX_GLOBAL.debugIsAllow=IXDebug.isAllow,IX_GLOBAL.IX=function(){function e(){}function f(a){return a}function g(){return(new Date).getTime()}function h(a,b){return b=b||2,("0".multi(b)+a).slice(0-b)}function j(){var a=new Date;return[a.getFullYear(),h(a.getMonth()+1),h(a.getDate()),"T",h(a.getHours()),h(a.getMinutes()),h(a.getSeconds()),"Z",h(a.getMilliseconds(),3)].join("")}function k(a){return function(b){return null!==b&&(typeof b==a||b instanceof A[a])}}function l(a){return null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp}function m(a){if(b(a)||l(a))return a;var c=null;if(B.isArray(a)){c=[];for(var d=0;d<a.length;d++)c[d]=m(a[d]);return c}c=new a.constructor;for(var e in a)c[e]=m(a[e]);return c}function n(c,d){if(a(c)||a(d))return c===d;if(c==d)return!0;var e=typeof d,f=typeof c;if(e!=f)return!1;if("undefined"===e)return!0;if("function"===e)return c.toString()!=d.toString();if("object"!==e)return c==d;var g=null;for(g in c)if(!n(c[g],d[g]))return!1;for(g in d)if(!(g in c||b(d[g])))return!1;return!0}function o(a,c){return b(c[a])&&(c[a]={}),!0}function p(a,c){return b(c[a])&&(c[a]={}),c[a]}function q(a,c){return!b(c[a])}function r(a,c){return b(c[a])?void 0:c[a]}function s(a,b,c){d(a,b[0])&&b.shift();for(var e=a,f=!0,g=0,h=b.length;h>g&&f&&e;){var i=b[g];if(""===i)return void console.error("invalid NS name:"+b.join("."));f=c(i,e),f&&(e=e[i]),g++}return f}function t(a,b,d){return a&&c(b)?s(a,b.split("."),d):void 0}function u(a,b,e){if(c(b)&&!d(a,b)){var f=b.split("."),g=f.pop(),h=0===f.length?a:s(a,f,p);h&&(h[g]=e)}}function v(a,b,c,d,e,f){if(!a||0===a.length)return d;var g=a.length;if(c=-1===c?g:c,b>=c)return d;for(var h=d,i=Math.max(0,b),j=Math.min(g,c),k=g-1,l=0;k>=l;l++){var m=f?l:k-l;m>=i&&j>m&&m in a&&(h=e(h,a[m],m))}return h}function w(a,b,c,d){function e(){a()?b():null!==h&&g()-j>h?i():setTimeout(e,f)}var f=Math.max(20,c||100),h=$XP(d,"maxAge",null),i=$XF(d,"expire"),j=null;isNaN(h)&&(h=null),null!==h&&(j=g()),e()}function x(a,b){return(b.min-a.max)*(b.max-a.min)<0}function y(a,b){return x({min:a.minx,max:a.maxx},{min:b.minx,max:b.maxx})&&x({min:a.miny,max:a.maxy},{min:b.miny,max:b.maxy})}function z(a,b){var c=j();console["ERR"===a?"error":"log"](c+" : "+b)}var A=(IX_VERSION,{object:Object,"function":Function,string:String,"boolean":Boolean,number:Number}),B={isEmpty:a,isUndefined:b,isBoolean:k("boolean"),isObject:k("object"),isString:k("string"),isNumber:k("number"),isFn:k("function"),isStaticType:l,isArray:function(a){return!!a&&a instanceof Array},getClass:function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]}},C={cvtToArray:function(a){if(!a)return[];if(a.toArray)return a.toArray();for(var b=[],c=a.length,d=0;c>d;d++)b.push(a[d]);return b}},D={ns:function(a){t(i,a,o)},nsExisted:function(a){return t(i,a,q)},getNS:function(a){return t(i,a,r)},setNS:function(a,b){u(i,a,b)}},E={hasProperty:function(a,b){return t(a,b,q)},getProperty:function(a,c,d){var e=t(a,c,r);return b(e)?d:e},setProperty:function(a,b,c){u(a,b,c)},getPropertyAsFunction:function(a,b){var c=t(a,b,r);return B.isFn(c)?c:e},clone:m,deepCompare:n},F=function(b,c){if(!a(b))for(var d=b.length,e=0;d>e;e+=1)c(b[e],e)},G={iterate:F,fnIterate:function(a,b){F(a,function(a){var c=a&&a[b];c&&B.isFn(c)&&c()})},iterbreak:function(a,b){try{F(a,b)}catch(c){}},loop:function(a,b,c){return v(a,0,-1,b,c,!0)},loopDsc:function(a,b,c){return v(a,0,-1,b,c,!1)},loopbreak:function(a,b){try{v(a,0,-1,0,b,!0)}catch(c){}},partLoop:function(a,b,c,d,e){return v(a,b,c,d,e,!0)},map:function(a,b){return v(a,0,-1,[],function(a,c,d){return a.push(b(c,d)),a},!0)},each:function(a,b,c){var d=b,e="",f=0;if(a)for(e in a)d=c(d,a[e],e,f),f+=1;return d}},H={getTimeInMS:g,getTimeStrInMS:j,emptyFn:e,selfFn:f,safeExec:function(a){try{a()}catch(b){}},execute:function(a,b){var c=D.getNS(a);B.isFn(c)&&c.apply(null,b)},checkReady:w,tryFn:function(a){return(B.isFn(a)?a:e)()}},I={inRange:function(a,b,c){return 0>=(a-b)*(a-c)},ifLineIntersect:x,ifRectIntersect:y},J=function(a,b){(null===a||void 0===a)&&(a={});for(var c in b)a[c]=b[c];return a},K={extend:J,inherit:function(){return G.loop(C.cvtToArray(arguments),{},J)}},L={err:function(a){z("ERR",a),IX_DEBUG_MODE&&IX.isFn(IX_GLOBAL.alert)&&IX_GLOBAL.alert(a)},log:function(a){IX_DEBUG_MODE&&z("LOG",a)}},M=0;return K.inherit(B,C,E,D,G,K,H,I,L,{id:function(){return M++,"ix"+M}})}(),IX_GLOBAL.$XA=IX.cvtToArray,IX_GLOBAL.$XE=IX.err,IX_GLOBAL.$XP=IX.getProperty,IX_GLOBAL.$XF=IX.getPropertyAsFunction;var l=/http(s)?:\/\/[\w.]+[^\s]*/g,m=/^[_a-zA-Z0-9.]+[\-_a-zA-Z0-9.]*@(?:[_a-zA-Z0-9]+\.)+[a-zA-Z0-9]{2,4}$/,n=new RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:</script>)","img"),o=new RegExp("(?:<form.*?>)|(?:</form>)","img"),p=/(^\s*)|\r/g,q=/{[^{}]*}/g,r=/^([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])$/;IX.extend(String.prototype,{camelize:function(){return this.replace(/\-(\w)/gi,function(a,b){return b.toUpperCase()})},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},replaceAll:function(a,b){return this.replace(new RegExp(a,"gm"),b)},loopReplace:function(a){return IX.loop(a,this,function(a,b){return a.replaceAll(b[0],b[1])})},trim:function(){for(var a=this.replace(p,""),b=a.length-1,c=/\s/;c.test(a.charAt(b));)b--;return a.substring(0,b+1)},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},stripScripts:function(){return this.replace(n,"")},stripFormTag:function(){return this.replace(o,"")},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},substrByLength:function(a){return f(this.toString(),a)},isSpaces:function(){return 0===this.replace(/(\n)|(\r)|(\t)/g,"").strip().length},isPassword:function(){var a=this.trim();return a.length===this.length&&this.length>5&&this.length<21},isEmail:function(){var a=this.trim();return IX.isEmpty(a)||m.exec(a)},isIP:function(){return r.test(this.trim())},trunc:function(a){return this.length>a?this.substring(0,a-3)+"...":this},tail:function(a){return this.length>a?this.substring(this.length-a):this},dehtml:function(){return this.loopReplace([["&","&amp;"],["<","&lt;"],['"',"&quot;"]])},enhtml:function(){return this.loopReplace([["&lt;","<"],["&quot;",'"'],["&amp;","&"]])},multi:function(a){for(var b="",c=0;a>c;c++)b+=this;return b},pickUrls:function(){return this.match(l)},replaceUrls:function(a,b){return this.replace(a||l,b||function(a){return'<a href="'+a+'" target="_blank">'+a+"</a>"})},regSplit:function(a){return e(this,a)},pick4Replace:function(){return this.match(q)},replaceByParams:function(a){return IX.loop(this.match(q),this,function(b,c){var d=c&&c.length>2?c.slice(1,-1):"";return IX.isEmpty(d)?b:b.replaceAll(c,$XP(a,d,""))})},toSafe:function(){return this.replace(/\$/g,"&#36;")}}),Function.prototype.bind=function(){var a=this,b=$XA(arguments),c=b.shift();return function(){return a.apply(c,b.concat($XA(arguments)))}}}(),function(){function a(a){return IX.isFn(a)?a:function(a,b){return IX.isObject(a)&&"equal"in a&&IX.isFn(a.equal)?a.equal(b):a==b}}function b(a,b){if(!a||0===a.length)return-1;for(var c=a.length,d=0;c>d;d++)if(b(a[d]))return d;return-1}function c(a,c,d){return 0<=b(c,function(b){return d(a,b)})}function d(a,b){var c=IX.isFn(b)?b:IX.selfFn;return IX.loop(a,[],function(a,b){return c(b,a)&&a.push(b),a})}function e(b,c,e){var f=a(e);return d(b,function(a){return!f(c,a)})}function f(a){return IX.isArray(a)?IX.loop(a,[],function(a,b){return a.concat(f(b))}):[a]}function g(b,e){var f=a(e);return d(b,function(a,b){return!c(a,b,f)})}IX.Array={init:function(a,b){for(var c=[],d=0;a>d;d++)c.push(IX.clone(b));return c},isFound:function(b,d,e){return c(b,d,a(e))},sort:function(a,b){return IX.map(a,function(a){return a}).sort(b)},compact:d,remove:e,pushx:function(a,b){return a.push(b),a},flat:f,indexOf:b,splice:function(a,b,c,d){var e=isNaN(c)?1:c,f=a.length;if(0>b||b>f||0>e||b+e>f)return[];var g=d?d:[];return[].concat(a.slice(0,b),g,a.slice(b+e))},toSet:g,isSameSet:function(b,c,f){function g(a){var b=h(k,a);return l=l||b,!b}if(null===b&&null===c)return!0;if(null===b||null===c)return!1;for(var h=a(f),i=b,j=c,k=null,l=!1;i.length>0&&j.length>0;){if(k=i[0],l=!1,j=d(j,g),!l)return!1;i=e(i,k,h)}return 0===i.length&&0===j.length},merge2Set:function(a,b,c){return g([].concat(a,b),c)}}}(),function(){function a(a,b,c){if(b.length<a)return!1;for(var d=0;a>d;d++)if(!(b[d]in c))return!1;return!0}function b(a){var b="Condition."+a+"["+IX.id()+"]:";return function(a){debugIsAllow("condition")&&IX.log(b+a)}}function c(a,c){function d(a,b,c,d){return b?(k[a]=new Error(a+":"+b),d(k,l)):(l[a]=c,void(0===i.length?(h("done ---------------"),d(null,l)):e(d)))}function e(a){var b=i.shift();h(" : =============="+b),j[b](function(c,e){h("done : =============="+b),d(b,c,e,a)})}function f(a){return 0===i.length?a({},{}):void e(a)}function g(a,b){return IX.isFn(b)&&(i.push(a),j[a]=b),{next:g,exec:f}}var h=b("sequential"),i=[],j={},k={},l={};return g(a,c)}IX.wait4=function(c,d,e){function f(b,c,d){if(c||k){if(k)return;return k=!0,e(new Error(b+":"+c))}i[b]=d,a(h,j,i)&&(g("done ---------------"),e(null,i))}var g=b("wait"),h=c.length,i={},j=[],k=!1;c.forEach(function(a,b){var c=IX.isString(a)?a:"t"+b;j.push(c),g("do : =============="+c),d(a,function(a,b){g("done : =============="+c),f(c,a,b)},b)})},IX.parallel=function(c,d){function e(b,c,d,e){k[b]=null===c?null:new Error(b+":"+c),l[b]=d,a(i.length,i,l)&&(h("done ---------------"),e(k,l))}function f(a){i.forEach(function(b){h("do : =============="+b),j[b](function(c,d){h("done: =============="+b),e(b,c,d,a)})})}function g(a,b){return IX.isFn(b)&&(i.push(a),j[a]=b),{on:g,exec:f}}var h=b("parallel"),i=[],j={},k={},l={};return g(c,d)},IX.sequential=c,IX.sequentialSteps=function(a){var b=c("START!",function(a){a(null,!0)});return IX.iterate(a,function(a){b.next(a[0],function(b){a[1](a[0],b)})}),b}}(),function(){IX.State={toggle:function(a,b){return void 0===b?!a:b}},IX.IManager=function(){var a={};return{isRegistered:function(b){return b in a&&a[b]},register:function(b,c){a[b]=c},unregister:function(b){a[b]=null},get:function(b){return b in a?a[b]:null},clear:function(){a={}}}};var a=IX.Array.indexOf;IX.IList=function(){function b(b){return b?a(f,function(a){return a==b}):-1}function c(a){a>=0&&a<f.length&&(f=f.slice(0,a).concat(f.slice(a+1)))}function d(a){if(f&&0!==f.length){var d=b(a);c(d),f.push(a)}else f=[a]}function e(a,e){var g=b(e);if(-1==g)return void d(a);var h=b(a);(-1==h||g-h!=1)&&(h>=0&&(c(h),g=b(e)),f=f.slice(0,g).concat([a],f.slice(h)))}var f=[];return{isEmpty:function(){return 0===f.length},isLast:function(a){return f.length>0&&a==f[f.length-1]},getList:function(){return f},getSize:function(){return f.length},indexOf:b,remove:c,tryRemove:function(a){c(b(a))},append:d,tryAdd:function(a){f&&0!==f.length?b(a)<0&&f.push(a):f=[a]},insertBefore:e,clear:function(){f=[]}}},IX.I1ToNManager=function(b){var c=IX.isFn(b)?b:function(a,b){return a==b},d=new IX.IManager,e=function(a){var b=d.get(a);return b&&b.length>0},f=function(b,d){return a(b,function(a){return c(a,d)})};return IX.inherit(d,{hasValue:e,put:function(a,b){if(!e(a))return void d.register(a,[b]);var c=d.get(a);-1==f(c,b)&&d.register(a,c.concat(b))},remove:function(a,b){var c=d.get(a),e=f(c,b);e>=0&&d.register(a,IX.Array.splice(c,e))}})},IX.IListManager=function(){var a=new IX.IManager,b=new IX.IList,c=function(c,d){a.register(c,d);var e=b.indexOf(c);d?-1==e&&b.append(c):b.remove(e)},d=function(b){return IX.map(b,function(b){return a.get(b)})};return IX.inherit(a,{register:c,unregister:function(a){c(a)},isEmpty:function(){return b.isEmpty()},getSize:function(){return b.getSize()},hasKey:a.isRegistered,isLastKey:function(a){return b.isLast(a)},getKeys:function(){return b.getList()},getByKeys:function(a){return d(a)},getAll:function(){return d(b.getList())},iterate:function(c){IX.iterate(b.getList(),function(b){c(a.get(b),b)})},getFirst:function(){var c=b.getList();if(!c||0===c.length)return null;for(var d=c.length,e=0;d>e;e++){var f=a.get(c[e]);if(f)return f}return null},append:b.append,insertBefore:b.insertBefore,remove:function(a){c(a)},clear:function(){a.clear(),b.clear()}})},IX.IPagedManager=function(a,b,c){function d(b,c){var d=a(c),e=d.getId();return i[b]=e,j.register(e,d),d}function e(a,b){"total"in a&&(h=a.total);var c=b||0;return IX.map(a.items,function(a,b){return d(c+b,a)})}function f(a,b,d,f){var g=a*b;if(f){for(var k=[],l=null===h?0:Math.min(b,h-g),m=0;l>m;m++){var n=i[g+m];if(IX.isEmpty(n))break;k.push(n)}if(l>0&&k.length==l)return d(j.getByKeys(k))}c({pageNo:a,pageSize:b},function(a){d(e(a,g))})}function g(a){h=a,i=[]}var h=null,i=[],j=b?b:new IX.IListManager;return{get:j.get,getFirst:j.getFirst,getTotal:function(){return h},load:f,putData:e,addItems:function(a){g(h+a.length)},removeItems:function(a){IX.iterate(a,function(a){j.unregister(a)}),g(h-a.length)},clear:function(){i=[]}}},IX.formatDataStore=function(a){var b=$XP(a,"items",[]);if(b.length>0&&"json"!=$XP(a,"type","json")){var c=$XP(a,"fields",[]);b=IX.map(b,function(a){return IX.loop(c,{},function(b,c,d){return b[c]=IX.isArray(a)?a[d]:a[c],b})})}return IX.map(b,function(a){var b=$XP(a,"id");return IX.isEmpty(b)&&(a.id=IX.id()),a})}}(),function(){function a(a,b){var c="get"+(p?"UTC":"");return IX.map(b,function(b){var d=a[c+b]()-("Month"==b?-1:0),e="00"+d;return"FullYear"==b?d:e.substring(e.length-2)})}function b(a,b){for(var c=(b-a)/1e3,d=m.length-1;d>=0;d--)if(c>=m[d]){var e=0===d?"":Math.round(c/(1==d?1:m[d]));return e+l[d]}}function c(a,b){var c=b?j:k;return 3==a.length&&IX.loop(a,!0,function(a,d,e){if(!a||isNaN(d)||d.indexOf(".")>=0)return!1;if(b&&0===e)return!0;var f=1*d+(b?0:1);return f>0&&f<=c[e]})}function d(a,b){return IX.isEmpty(a)?"":(a=a.split(b,3),IX.map(b==q?[4,2,2]:[2,2,2],function(b,c){var d=a.length>c?a[c]:"";return("0".multi(b)+d).substr(d.length,b)}).join(b))}function e(b,c){var d="Time"!=c?a(b,g).join(q):"",e="Date"!=c?a(b,h).join(r):"";return"Date"==c?d:"Time"==c?e:d+" "+e}function f(a,b){return c(a.split(b?q:r,3),b)}var g=["FullYear","Month","Date"],h=["Hours","Minutes","Seconds"],i=["Hours","Minutes","Day"],j=[-1,12,31],k=[24,60,60],l=["\u521a\u624d","\u79d2\u949f\u524d","\u5206\u949f\u524d","\u5c0f\u65f6\u524d","\u5929\u524d","\u5468\u524d","\u4e2a\u6708\u524d","\u5e74\u524d"],m=[0,10,60,3600,86400,604800,2592e3,31536e3],n="\u661f\u671f\u65e5,\u661f\u671f\u4e00,\u661f\u671f\u4e8c,\u661f\u671f\u4e09,\u661f\u671f\u56db,\u661f\u671f\u4e94,\u661f\u671f\u516d".split(","),o={Year:"\u5e74",Month:"\u6708",Day:"\u65e5",Today:"\u4eca\u5929"},p=!1,q="-",r=":";IX.Date={setDS:function(a){q=a},setTS:function(a){r=a},setUTC:function(a){p=a},getDS:function(){return q},getTS:function(){return r},isUTC:function(){return p},format:e,formatDate:function(a){return e(a,"Date")},formatTime:function(a){return e(a,"Time")},formatStr:function(a){return a=(a+" ").split(" "),d(a[0],q)+" "+d(a[1],r)},formatDateStr:function(a){return d(a,q)},formatTimeStr:function(a){return d(a,r)},getDateText:b,formatBySec:function(a,b){return a?e(new Date(1e3*a),b?"":"Date"):""},getTickInSec:function(a){var b=null;if(a&&a instanceof Date)b=a.getTime();else if(IX.isString(a)&&!IX.isEmpty(a)){var c=a.replace(/[0-9|:|\ ]/g,"")[0];b=new Date(a.replaceAll(c,"/")).getTime()}return isNaN(b)?null:Math.ceil(b/1e3)},isValid:function(a,b){var c=a.split(" ");return"Date"==b||"Time"==b?1==c.length&&f(c[0],"Date"==b):2==c.length&&f(c[0],!0)&&f(c[1],!1)}},IX.IDate=function(c){function d(b){var c=a(new Date,g);return b=b||c[0]>l[0],[b?l[0]:"",b?o.Year:"",l[1]-0,o.Month,l[2]-0,o.Day].join("")}function f(b,c){var d=a(b,[].concat(g,i)),e=[],f=!1;return l[0]!=d[0]&&(f=!0,e=e.concat(l[0],q)),f||l[1]!=d[1]||l[2]!=d[2]?e=e.concat(l[1],q,l[2],""):c&&(e=o.Today+" "),e=e.concat(l[3],r,l[4]),e.join("")}var h=1e3*c,j=new Date(h),k=e(j),l=a(j,[].concat(g,i));return{toText:function(){return k},toWeek:function(){return n[l[5]-0]},toDate:d,toTime:function(a){return[l[3],l[4]].join(a||":")},toShort:function(){return f(new Date,!1)},toInterval:function(a){var c=a?new Date(1e3*a):new Date,d=c.getTime();return 36e5>d-h?b(h,d):f(c,!0)},toSimpleInterval:function(){return b(1e3*c,IX.getTimeInMS())}}}}(),function(){function a(){var a=[],c=0;for(c=0;36>c;c++)a[c]=Math.floor(16*Math.random());for(a[14]=4,a[19]=3&a[19]|8,c=0;36>c;c++)a[c]=b[a[c]];return a[8]=a[13]=a[18]=a[23]="",a.join("")}var b="0123456789ABCDEF";IX.UUID={generate:a},IX.IObject=function(b){var c=$XP(b,"id",a()),d=$XP(b,"type");return{getId:function(){return c},setId:function(a){c=a},getType:function(){return d},equal:function(a){return c==a.getId()},destroy:function(){}}}}(),function(){function a(a){function b(a,b){j[a]={name:a,tpl:[b]}}function f(a,b){j[a].tpl.push(b)}function g(a){var b=j[a],c=b.tpl.join("");b.tpl=c,b.list=IX.Array.toSet(c.match(d)).sort()}function h(a,c,d){var e=a[0]+"."+c;return f(a[0],"#"+c+"#"),a.unshift(e),b(e,d),a}function i(a,b){return g(a[0]),a.shift(),f(a[0],b),a}var j={},k=a.regSplit(c),l=k.arr,m=k.separate;b("root",m[0]);var n=IX.loop(l,["root"],function(a,b,c){if("</tpl>"==b)return i(a,m[c+1]);var d=b.split(e);return h(a,d[1],m[c+1])});return g("root"),1==n.length&&"root"==n[0]?j:null}var b={render:function(){return""},renderData:function(){return""},getTpl:function(){return""}},c=new RegExp("(?:<tpl.*?>)|(?:</tpl>)","img"),d=/([#\{])([\u4E00-\u9FA5\w\.-]+)[#\}]/g,e=/['"]/;IX.ITemplate=function(c){function d(a,b){if(!IX.hasProperty(a,b))return null;var c=$XP(a,b);return IX.isEmpty(c)?"":c}function e(a,b){var c=i[a];return c?c.tpl.loopReplace(IX.loop(c.list,[],function(c,f){var g=f.charAt(0),h=f.substring(1,f.length-1);if("{"==g){var i=d(b,h);null!==i&&c.push([f,i])}else if("#"==g){var j=IX.map($XP(b,h,[]),function(b,c){var d=IX.inherit(b,{idx:c});return e(a+"."+h,d)}).join("");c.push([f,j])}return c})):(IX.err("can't find templete by name: "+a),"")}function f(a,b){var c="root";return IX.isEmpty(a)||(c=0===a.indexOf("root")?a:"root."+a),e(c,b?b:j(c)).replace(/\[(\{|\})\]/g,"$1")}function g(a,b){var c=i["root."+b];if(!c)return"";var d=c.tpl,e=c.list;return e&&0!==e.length?IX.loop(e,d,function(a,c){var d=c.replace(/#/g,"");return a.replace(new RegExp(c,"img"),g(b+"."+d))}):b==a?d:'<tpl id="'+b.split(".").pop()+'">'+d+"</tpl>"}var h=$XP(c,"tpl",[]);if(h=[].concat(h).join(""),IX.isEmpty(h))return b;var i=a(h);if(!i)return IX.err("unformated Tpl: "+h),b;var j=$XP(c,"tplDataFn");return IX.isFn(j)||(j=function(){return null}),{render:function(a){return f(a)},renderData:function(a,b){return f(a,b)},getTpl:function(a){if(IX.isEmpty(a)||"root"==a)return h;var b=0===a.indexOf("root.")?a.substring(5):a;return g(b,b)}}}}(),function(){var a=IX.getTimeInMS;IX.ITask=function(b,c,d){function e(){if(h&&(b(i),i++,!(j>0&&i>=j))){var d=a();g=setTimeout(e,f+2*c-d),f=d}}var f=-1,g=null,h=!1,i=0,j=isNaN(d)?-1:d;return{start:function(){f=a(),h=!0,i=0,g=setTimeout(e,c)},stop:function(){h=!1,clearTimeout(g),g=null,f=-1}}}}();var fs=require("fs"),path=require("path"),util=require("util"),crypto=require("crypto"),childProcess=require("child_process"),logFile="/tmp/ix";IX.extend(IX,{safeMkdirSync:_safeMkdirSync,saveFileIfNotExist:saveFileIfNotExist,safeChkFileSync:safeChkFileSync,safeRenameAsSync:safeRenameAsSync,safeCopyToSync:safeCopyToSync,safeWriteFileSync:safeWriteFileSync,iterDirSync:iterDirSync,createDigest:createDigest,digestOnce:digestOnce,setLogPath:setLogPath,err:function(a){_log("ERR",a)},log:function(a){_log("LOG",a)}});